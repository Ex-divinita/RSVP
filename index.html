<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tirana International Fair: Conference RSVP</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for a clean, modern look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Simple animation for the form/confirmation message to fade in */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Custom style for checked state to provide a clear visual cue */
        input[type="checkbox"]:checked + label {
            border-color: #ed1b24;
            border-width: 2px;
            background-color: #fef2f2; /* Tailwind's red-50 */
        }
        /* Style for non-selectable conference items */
        .not-selectable {
            background-color: #f3f4f6; /* Tailwind's gray-100 */
            opacity: 0.75;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen py-6 md:py-12">

    <div class="w-full max-w-3xl mx-auto p-4">
        <!-- Main RSVP Card -->
        <div id="rsvp-card" class="bg-white rounded-xl shadow-2xl overflow-hidden fade-in">
            <!-- Header Image -->
            <img src="image1.jpg" class="w-full h-auto">
            
            <!-- Header Section -->
            <div class="p-6 md:p-8 text-center" style="background-color: #ed1b24;">
                <h1 class="text-3xl md:text-4xl font-bold text-white tracking-tight">Tirana International Fair</h1>
                <p class="text-gray-200 mt-2 text-md md:text-lg">Conference Registration</p>
            </div>

            <!-- RSVP Form -->
            <form id="rsvp-form" class="p-6 md:p-8" novalidate>
                <div class="space-y-8">
                    <!-- Conference Selection Section -->
                    <fieldset>
                        <legend class="text-xl font-bold text-gray-900 mb-4">Select Conferences to Attend</legend>
                        <div id="conference-list-container" class="space-y-4">
                            <!-- Conference items will be dynamically inserted here -->
                        </div>
                    </fieldset>

                    <!-- Personal Information Section -->
                    <div id="attendee-fields-container" class="space-y-6 pt-6 border-t border-gray-200">
                        <!-- Attendee 1 (Primary) -->
                        <div class="attendee-group">
                            <h3 class="text-lg font-bold text-gray-900 mb-4">Attendee 1</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                                <div class="md:col-span-2">
                                    <label for="fullname-1" class="block text-sm font-medium text-gray-700">Full Name</label>
                                    <input type="text" id="fullname-1" name="fullname-1" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500">
                                    <p class="error-text text-xs text-red-600 mt-1 hidden">This field is required.</p>
                                </div>
                                <div>
                                    <label for="email-1" class="block text-sm font-medium text-gray-700">Email Address</label>
                                    <input type="email" id="email-1" name="email-1" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500">
                                    <p class="error-text text-xs text-red-600 mt-1 hidden">This field is required.</p>
                                </div>
                                <div>
                                    <label for="phone-1" class="block text-sm font-medium text-gray-700">Phone Number</label>
                                    <input type="tel" id="phone-1" name="phone-1" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500">
                                    <p class="error-text text-xs text-red-600 mt-1 hidden">This field is required.</p>
                                </div>
                                <div>
                                    <label for="company-1" class="block text-sm font-medium text-gray-700">Company <span class="text-gray-500">(Optional)</span></label>
                                    <input type="text" id="company-1" name="company-1" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500">
                                </div>
                                <div>
                                    <label for="position-1" class="block text-sm font-medium text-gray-700">Position <span class="text-gray-500">(Optional)</span></label>
                                    <input type="text" id="position-1" name="position-1" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button type="button" id="add-attendee-btn" class="w-full bg-gray-200 text-gray-800 font-bold py-3 px-4 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-300">
                        + Add Attendee
                    </button>
                </div>
                
                <div class="mt-8">
                    <button type="submit" class="w-full text-white font-bold py-3 px-4 rounded-md hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition duration-300" style="background-color: #ed1b24;">
                        Register for Selected Sessions
                    </button>
                </div>
                <p id="error-message" class="text-xs text-red-600 text-center mt-2 hidden">Please select at least one conference and fill out all required fields.</p>
            </form>
        </div>
        
        <!-- Confirmation Message -->
        <div id="confirmation-message" class="hidden bg-white rounded-xl shadow-2xl p-8 sm:p-12 text-center fade-in">
             <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6">
                <svg class="h-10 w-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            </div>
            <h2 class="text-3xl font-bold text-gray-800">Registration Confirmed!</h2>
            <p id="response-text" class="mt-3 text-lg text-gray-600">Your registration has been received.</p>
            <div id="session-list" class="mt-6 text-left max-w-md mx-auto"></div>
        </div>
    </div>

    <script>
        const conferences = [
            // Wednesday, 5 November 2025 
            { id: 'inauguration', date: 'Wednesday, 5 November 2025', time: '17:00–20:00', title: 'Official Inauguration Ceremony', location: 'Main Stage – Lower Ground Floor', description: [ 'Opening remarks and speeches by distinguished government officials and business leaders', 'Awards & recognitions', 'The Future of the Tirana International Fair & Growth Prospects', 'Grand Opening of the Albania 2030 Immersive Experience', 'Artistic Performance: Starring Eva Golemi, in a captivating collaboration of music, light, and performance'], isSelectable: true },
            // Thursday, 6 November 2025
            { id: 'tourism', date: 'Thursday, 6 November 2025', time: '11:00–12:00', title: 'Tourism Now & Tomorrow', location: 'Conference Hall B, Lower Ground Floor', description: [ 'Comparison of where the tourism industry was 5 years ago, where it is now and where it will be in the next 5 years, Albania 2030.', 'Sustainable tourism practices, plans and projects.', 'The importance of cultural tourism and strategies.' ], collaborators: 'In collaboration with the Ministry of Tourism, Culture and Sports', isSelectable: true },
            { id: 'aida', date: 'Thursday, 6 November 2025', time: '12:00–13:00', title: 'AIDA\'s Fireside Chat: Investing in Albania - Opportunities Beyond Borders', location: 'Windows Into The Future Pavillion, Ground Floor', description: [ 'Overview o f Albania\'s evolving investment landscape and key priority sectors', 'Presentation of new reforms and incentives for foreign investors', 'Success stories from strategic partnerships driving sustainable growth', 'Positioning Albania as a competitive hub aligned with Albania 2030' ], collaborators: 'Presented by the Albanian Investment Development Agency (AIDA)', isSelectable: true },
            { id: 'sustainability', date: 'Thursday, 6 November 2025', time: '13:00–14:00', title: 'Mind vs Heart – Building a Sustainable Future', location: 'Conference Hall B, Lower Ground Floor', description: [ 'Balancing individual action (Heart) and systemic policy (Mind) in achieving Albania’s 2030 environmental goals.', 'Advancing the circular economy through legislation, infrastructure, and incentives.', 'Debate: Which drives change—Heart or Mind—and how can they unite for lasting impact?' ], collaborators: 'In collaboration with the Ministry of Environment', isSelectable: true },
            { id: 'vytal', date: 'Thursday, 6 November 2025', time: '14:00–14:30', title: 'VYTAL Press Conference: Launch of VYTAL Albania', location: 'Conference Hall B, Lower Ground Floor', description: [ 'Official presentation and launch of VYTAL Albania, introducing the brand’s mission and sustainable packaging model to the Albanian market.' ], collaborators: '', isSelectable: true },
            { id: 'infrastructure', date: 'Thursday, 6 November 2025', time: '15:00–16:00', title: 'Albania’s Mega Infrastructure Projects – Gateway to Global Integration', location: 'Conference Hall B, Lower Ground Floor', description: [ 'Presentation of key national infrastructure projects: Porto Romano, Corridor VIII Railway, and upcoming airports.', 'Regional connectivity, investment impact, and development timelines.' ], collaborators: 'In collaboration with the Ministry of Infrastructure and Energy', isSelectable: true },
            { id: 'tower', date: 'Thursday, 6 November 2025', time: '16:00–17:00', title: 'Presentation: Alana\'s Tower by Herzog & de Meuron', location: 'Windows into the Future Pavilion, Ground Floor', description: [ 'A special presentation by KLAR, unveiling the visionary KLAR Tower - an architectural landmark designed by the world-renowned firm Herzog & de Meuron, symbolizing the modern skyline and forward-looking spirit of Albania 2030' ], isSelectable: true },
            { id: 'energy', date: 'Thursday, 6 November 2025', time: '17:00–18:00', title: 'Energy Roadmap for Albania and the Renewable Transition', location: 'Conference Hall B, Lower Ground Floor', description: [ 'National Energy Strategy 2030 & EU Green Deal alignment.', 'Renewable expansion: hydro, solar, wind, and green hydrogen.', 'Public–private partnerships & financing models.', 'Sustainability, decarbonization, and key project milestones.' ], collaborators: 'In collaboration with Ministry of Infrastructure and Energy', isSelectable: true },
            { id: 'euroelektra', date: 'Thursday, 6 November 2025', time: '18:00–19:00', title: 'Euroelektra Happy Hour', location: 'Stand G44, Ground Floor', description: [ 'Join Euroelektra for an exclusive Happy Hour at their stand, an informal networking moment with drinks, music, and good company to celebrate innovation and partnership.' ], isSelectable: true },
            { id: 'dj', date: 'Thursday, 6 November 2025', time: '20:00–22:00', title: 'DJ Rea & Ema Popivoda: Piano Meets Electronic', location: 'Main Stage, Lower Ground Floor', description: [ 'An immersive live performance blending classical piano mastery with a n electronic DJ set, a unique dialogue between tradition and modern rhythm.' ], isSelectable: true },
            
            // Friday, 7 November 2025
            { id: 'food-safety', date: 'Friday, 7 November 2025', time: '11:00–12:00', title: 'From Farm to Future – Food Safety and Supply Chain Transparency', location: 'Conference Hall B, Lower Ground Floor', description: [ 'Advancing Albania’s 2030 vision for sustainable and secure agri-food systems.', 'Digital tracking, certification, and EU-aligned quality standards.', 'Technology and innovation for transparent farm-to-table processes.', 'National roadmap for modernizing food monitoring and traceability.' ], collaborators: 'In collaboration with the Ministry of Agriculture and Rural Development', isSelectable: true },
            { id: 'klevifire', date: 'Friday, 7 November 2025', time: '11:00–13:00', title: 'Live Demonstration: Klevi Fire Protection', location: 'Rrapi i Treshit Military Base', description: [ 'Live demonstration of advanced fire protection systems and safety technologies', 'Showcasing KLEVI\'s latest innovations in fire prevention and emergency response', 'Practical insights into installation, operation, and maintenance procedures', 'Highlighting modern standards in building and industrial fire safety'], isSelectable: true },
            { id: 'data-protection', date: 'Friday, 7 November 2025', time: '12:30–13:30', title: 'Data Protection as the Infrastructure of the Digital Future', location: 'Conference Hall B, Lower Ground Floor', description: [ 'GDPR & New Data Protection Legislations in Albania', 'The role of data protection in building a secure digital ecosystem.', 'Balancing innovation, privacy, and compliance.'], collaborators: 'In collaboration with Information and Data Protection Commissioner.', isSelectable: true },
            { id: 'strategic-projects', date: 'Friday, 7 November 2025', time: '15:00–16:00', title: 'Albania’s Strategic Projects', location: 'Conference Hall B, Lower Ground Floor', description: [ 'Presentation of Expo Albania, Durana Tech Park, Asllan Rusi.', 'Timelines, Opportunities & Integration.' ], collaborators: 'In collaboration with the Albanian Investment Corporation & The Ministry of Economy and Innovation', isSelectable: true },
            { id: 'lufra', date: 'Friday, 7 November 2025', time: '15:30–16:30', title: 'Lufra Happy Hour', location: 'Stand O02, Outdoor Area', description: [ 'Enjoy a refreshing Lufra Happy Hour featuring local dairy specialties, and friendly networking in an open-air setting, a perfect blend of taste, tradition, and connection.' ], isSelectable: true },
            { id: 'cybersecurity', date: 'Friday, 7 November 2025', time: '17:00 – 18:00', title: 'Cybersecurity & Digital Resilience in Albania', location: 'Albania 2030 Pavilion - AIDA Booth G38', description: [ 'Strengthening Albania’s cybersecurity infrastructure and national resilience.', 'Risk management for businesses—from SMEs to critical sectors.', 'The UK–Albania partnership: shared strategies, expertise, and best practices in cyber governance.', 'The role of public–private collaboration, AI, and education in building digital resilience.' ], collaborators: 'In collaboration with UK Cyber Scheme, Burstock, and the Albanian Cyber Security Authority, Information and Data Protection Commisioner', isSelectable: true },
            { id: 'book', date: 'Friday, 7 November 2025', time: '18:00 – 19:00', title: 'Book Promotion: "Lufra dhe Shqiptaret" by Pellumb Qazimi, Lieutenant General (ret), former Ambassador', location: 'Conference Hall A, Lower Ground Floor', description: [ 'A special presentation of Lieutenant General Pillumb Qazimi\'s, latest book, "Lufta dhe Shqiptaret" ("The War and the Albanians"), offering a profound reflection on Albania\'s historical and geopolitical journey through the lens of war, identity, and national resilience.'], isSelectable: true },
            { id: 'cocktail', date: 'Friday, 7 November 2025', time: '18:00 – 20:00', title: 'Networking Cocktail: Taste of Tradition', location: 'Albania 2030 Pavilion - AIDA Booth G38', description: [ 'An evening reception hosted by AIDA to foster informal networking among investors, institutions, and entrepreneurs', 'Featuring traditional Albanian drinks, local cheeses, and live instrumental music - blending the authenticity of Albanian culture with modern business dialogue', 'Aimed at strengthening connections between local producers, investors, and policymakers in a relaxed and culturally rich atmosphere'], collaborators: 'In collaboration with the Albanian Investment Development Agency (AIDA)', isSelectable: true },
            { id: 'ballet', date: 'Friday, 7 November 2025', time: '20:00 – 22:00', title: 'Albanian National Ballet Ensemble - Heritage in Motion', location: 'Main Stage, Lower Ground Floor', description: [ 'A special performance by the Albanian National Ballet Ensemble celebrating the nation\'s cultural heritage through dance, music, and movement.'], isSelectable: true },
            
            // Saturday, 8 November 2025
            { id: 'cefa', date: 'Saturday, 8 November 2025', time: '10:00–13:00', title: 'CEFA Steering Committee (Closed Session)', location: 'Oval Room', description: [ 'Meeting of European fair leaders.' ], isSelectable: false },
            { id: 'durana', date: 'Saturday, 8 November 2025', time: '11:00–12:00', title: 'Presentation: Durana Tech Park - Building Albania\'s Innovation Corridor', location: 'Windows into the Future Pavilion, Ground Floor', description: [ 'A visionary presentation by Durana Tech Park unveiling Albania\'s first integrated technology and business hub connecting Tirana and Durres', 'The session will showcase the park\'s masterplan, investment zones, and its role in driving digital transformation and sustainable economic growth within the national vision Albania 2030.' ], isSelectable: true },
            { id: 'cinematography', date: 'Saturday, 8 November 2025', time: '15:00–16:00', title: 'Albania on Screen – The 2030 Vision of the National Centre of Cinematography', location: 'Conference Hall B, Lower Ground Floor', description: [ 'Presentation of the National Centre of Cinematography’s 2030 Vision.', 'Cultural and Economic Impact of the Albanian Film Industry.', 'Future Projects, Co-Productions & International Partnerships.' ], collaborators: 'In collaboration with the National Centre of Cinematography (QKK)', isSelectable: true },
            { id: 'opera', date: 'Saturday, 8 November 2025', time: '17:00–18:00', title: 'The Future Stage – National Theatre of Opera and Ballet 2030 Vision', location: 'Conference Hall B, Lower Ground Floor', description: [ 'Presentation of the National Theatre of Opera and Ballet’s 2030 Vision.', 'The Role of Performing Arts in Albania’s Cultural and Economic Growth.', 'Innovation, Education & International Collaborations in the Arts.' ], collaborators: 'In collaboration with the National Theatre of Opera and Ballet (TKOB)', isSelectable: true },
            { id: 'ball', date: 'Saturday, 8 November 2025', time: '20:00–00:00', title: 'MUSE-X Masked Ball: Closing Celebration & Official 2026 Announcement', location: 'Conference Hall B, Lower Ground Floor', description: [ 'An enchanting masked ball organized by Muse-X, marking the official announcement of Muse-X 2026. The evening features a live performance by The Rituals band - a festive finale blending music, art, and celebration to close the 31st Tirana International Fair.' ], isSelectable: true }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const rsvpForm = document.getElementById('rsvp-form');
            const rsvpCard = document.getElementById('rsvp-card');
            const confirmationMessage = document.getElementById('confirmation-message');
            const responseText = document.getElementById('response-text');
            const sessionList = document.getElementById('session-list');
            const errorMessage = document.getElementById('error-message');
            const addAttendeeBtn = document.getElementById('add-attendee-btn');
            const attendeeFieldsContainer = document.getElementById('attendee-fields-container');
            const conferenceListContainer = document.getElementById('conference-list-container');
            
            function populateConferences() {
                let currentDay = '';
                conferenceListContainer.innerHTML = conferences.map(conf => {
                    const dayHeader = conf.date !== currentDay ? `<h3 class="text-lg font-bold text-gray-800 pt-4">${conf.date}</h3>` : '';
                    currentDay = conf.date;
                    const descriptionHtml = conf.description.map(p => `<p class="text-sm text-gray-600">${p}</p>`).join('');
                    const collaboratorHtml = conf.collaborators ? `<p class="text-sm text-gray-500 italic mt-2">${conf.collaborators}</p>` : '';
                    const labelClasses = conf.isSelectable ? 'cursor-pointer hover:bg-gray-50 transition-colors' : 'not-selectable';
                    return `${dayHeader}<div class="relative"><input type="checkbox" name="conference" value="${conf.title}" id="${conf.id}" class="hidden" ${!conf.isSelectable ? 'disabled' : ''}><label for="${conf.id}" class="block p-4 border border-gray-300 rounded-lg ${labelClasses}"><div class="flex justify-between items-start"><div class="pr-4"><div class="font-bold text-gray-800">${conf.title}</div><div class="text-sm text-gray-600 mt-1">${conf.time} - ${conf.location}</div></div><button type="button" class="more-info-btn text-sm font-medium text-gray-700 hover:text-gray-900 ml-4 flex-shrink-0 px-3 py-1 rounded-md bg-gray-100 hover:bg-gray-200">More Info</button></div><div class="conference-details hidden mt-4 pt-4 border-t border-gray-200 space-y-2">${descriptionHtml}${collaboratorHtml}</div></label></div>`;
                }).join('');
            }
            
            populateConferences();

            conferenceListContainer.addEventListener('click', (event) => {
                 if (event.target.classList.contains('more-info-btn')) {
                    event.preventDefault(); 
                    const details = event.target.closest('label').querySelector('.conference-details');
                    details.classList.toggle('hidden');
                    event.target.textContent = details.classList.contains('hidden') ? 'More Info' : 'Less Info';
                }
            });

            function updateAttendeeNumbering() {
                const allGroups = attendeeFieldsContainer.querySelectorAll('.attendee-group');
                allGroups.forEach((group, index) => {
                    const num = index + 1;
                    group.querySelector('h3').textContent = `Attendee ${num}`;
                    const fields = ['fullname', 'email', 'phone', 'company', 'position'];
                    fields.forEach(field => {
                        const input = group.querySelector(`input[id^="${field}-"]`);
                        if (input) {
                            input.labels[0].setAttribute('for', `${field}-${num}`);
                            input.id = `${field}-${num}`;
                            input.name = `${field}-${num}`;
                        }
                    });
                });
            }

            addAttendeeBtn.addEventListener('click', () => {
                const newAttendeeId = attendeeFieldsContainer.querySelectorAll('.attendee-group').length + 1;
                const newAttendeeFields = `<div class="attendee-group mt-6 pt-6 border-t border-gray-200"><div class="flex justify-between items-center mb-4"><h3 class="text-lg font-bold text-gray-900">Attendee ${newAttendeeId}</h3><button type="button" class="remove-attendee-btn text-sm font-medium text-red-600 hover:text-red-800">Remove</button></div><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4"><div class="md:col-span-2"><label for="fullname-${newAttendeeId}" class="block text-sm font-medium text-gray-700">Full Name</label><input type="text" id="fullname-${newAttendeeId}" name="fullname-${newAttendeeId}" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500"><p class="error-text text-xs text-red-600 mt-1 hidden">This field is required.</p></div><div><label for="email-${newAttendeeId}" class="block text-sm font-medium text-gray-700">Email Address</label><input type="email" id="email-${newAttendeeId}" name="email-${newAttendeeId}" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500"><p class="error-text text-xs text-red-600 mt-1 hidden">This field is required.</p></div><div><label for="phone-${newAttendeeId}" class="block text-sm font-medium text-gray-700">Phone Number</label><input type="tel" id="phone-${newAttendeeId}" name="phone-${newAttendeeId}" required class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500"><p class="error-text text-xs text-red-600 mt-1 hidden">This field is required.</p></div><div><label for="company-${newAttendeeId}" class="block text-sm font-medium text-gray-700">Company <span class="text-gray-500">(Optional)</span></label><input type="text" id="company-${newAttendeeId}" name="company-${newAttendeeId}" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500"></div><div><label for="position-${newAttendeeId}" class="block text-sm font-medium text-gray-700">Position <span class="text-gray-500">(Optional)</span></label><input type="text" id="position-${newAttendeeId}" name="position-${newAttendeeId}" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-3 px-4 focus:outline-none focus:ring-red-500 focus:border-red-500"></div></div></div>`;
                attendeeFieldsContainer.insertAdjacentHTML('beforeend', newAttendeeFields);
            });

            attendeeFieldsContainer.addEventListener('click', (event) => {
                if (event.target.classList.contains('remove-attendee-btn')) {
                    event.target.closest('.attendee-group').remove();
                    updateAttendeeNumbering();
                }
            });

            rsvpForm.addEventListener('submit', function(event) {
                event.preventDefault();
                
                let isValid = true;
                rsvpForm.querySelectorAll('.error-text').forEach(err => err.classList.add('hidden'));
                const requiredInputs = rsvpForm.querySelectorAll('input[required]');
                requiredInputs.forEach(input => {
                    if (input.value.trim() === '') {
                        isValid = false;
                        const errorP = input.nextElementSibling;
                        if (errorP && errorP.classList.contains('error-text')) {
                            errorP.classList.remove('hidden');
                        }
                    }
                });
                
                const selectedConferencesCheck = document.querySelectorAll('input[name="conference"]:checked');
                if (selectedConferencesCheck.length === 0) isValid = false;
                
                if (!isValid) {
                    errorMessage.textContent = 'Please select at least one conference and fill out all required fields.';
                    errorMessage.classList.remove('hidden');
                    return;
                }
                errorMessage.classList.add('hidden');
                
                const submitButton = rsvpForm.querySelector('button[type="submit"]');
                submitButton.disabled = true;
                submitButton.textContent = 'Submitting...';

                const attendees = [];
                const attendeeGroups = attendeeFieldsContainer.querySelectorAll('.attendee-group');
                attendeeGroups.forEach((group, index) => {
                    const num = index + 1;
                    attendees.push({
                        fullName: group.querySelector(`#fullname-${num}`).value.trim(),
                        email: group.querySelector(`#email-${num}`).value.trim(),
                        phone: group.querySelector(`#phone-${num}`).value.trim(),
                        company: group.querySelector(`#company-${num}`).value.trim(),
                        position: group.querySelector(`#position-${num}`).value.trim(),
                    });
                });

                const selectedConferences = Array.from(selectedConferencesCheck).map(cb => cb.value);

                const payload = {
                    timestamp: new Date().toISOString(),
                    attendees: attendees,
                    conferences: selectedConferences
                };

                const scriptURL = 'https://script.google.com/macros/s/AKfycbyAM2O85cFHidYOklPK9OxMvEUiYJYqjr_R5Ka_TQcc9JF3vhcZhQsatPLRBN-SoN6T/exec';
                
                try {
                    // Send data without waiting for a response to avoid CORS issues.
                    fetch(scriptURL, {
                        method: 'POST',
                        mode: 'no-cors',
                        // Add headers to specify we are sending JSON
                        headers: { 
                          'Content-Type': 'application/json' 
                        },
                        // Send the payload directly as a JSON string
                        body: JSON.stringify(payload)
                    });

                    // Assume success and show confirmation immediately.
                    const primaryName = document.getElementById('fullname-1').value;
                    const totalAttendees = attendeeFieldsContainer.querySelectorAll('.attendee-group').length;
                    responseText.textContent = `Thank you, ${primaryName}! Your registration for ${totalAttendees} attendee(s) is confirmed. A confirmation email will be sent shortly.`;
                    
                    let sessionsHtml = '<h4 class="font-bold text-gray-700 mb-2">Your Registered Sessions:</h4><ul class="list-disc list-inside bg-gray-50 p-4 rounded-md">';
                    selectedConferences.forEach(conf => { sessionsHtml += `<li class="text-gray-600">${conf}</li>`; });
                    sessionsHtml += '</ul>';
                    
                    sessionList.innerHTML = sessionsHtml;
                    rsvpCard.classList.add('hidden');
                    confirmationMessage.classList.remove('hidden');
                
                } catch(error) {
                    console.error('Error!', error.message);
                    errorMessage.textContent = 'An error occurred during submission. Please try again later.';
                    errorMessage.classList.remove('hidden');
                } finally {
                    submitButton.disabled = false;
                    submitButton.textContent = 'Register for Selected Sessions';
                }
            });
        });
    </script>
</body>
</html>









